# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание архитектуры
Для реализации проекта, был выбран паттерн проектирования MVP (Model-View-Presenter).

Слои приложения

1) Данные (Model)

Отвечает за работу с данными, предоставляет методы работы с ними (примеры методов: запросы к базе данных, проверка на корректность и т.д.)
Содержит значительную часть бизнес-логики. 
Модель не должна ни взаимодействовать с представлением напрямую, ни управлять UI-элементами.

Классы, отвечающие за слой данных:

> Базовый компонент Model:

Определяет методы для управления данными и логикой модели. 

> Appstate

Является дочерним классом Model. Управляет данными, бизнес-логикой и состоянием приложения.
Содержит методы:
- clearBasket - очищает корзину
- getTotal - вычисляет общую сумму покупки
- validateOrder - отвечает за валидацию полей форм заказа

2) Отображение (View)

Выполняет функцию отображения данных и генерирует события для действий пользователя.  
Слой View никак не управляет данными, а лишь отображает получаемую информацию из Model.

Классы, отвечающие за отображение:

> Базовый класс Component

Представляет собой абстрактный класс. Component наследуется следующими классами:
- Card
- Form
- Basket

Component содержит инструментарий работы с DOM и имеет следующие методы:
- toggleClass: переключает класс элемента;
- setText: устанавливает текстовое значение;
- setHidden: скрывает элемент;
- setVisible: показывает элемент;
- render: отображает элемент на странице

> Card

Класс отвечает за отображение карточки товара. Класс задаёт внутри карточки категорию, название, изображение и цену товара. Поля - элементы разметки страницы.
В конструктор передаётся темплейт карточки, а также экземпляр объекта EventEmitter, отвечающий за работу событий.

Методы класса:
- setTitle:string - устанавливает название карточки;
- setId: string - устанавливает id;
- setCategory: string - устанавливает текстовое значение в категорию;
- setImage:string - устанавливает изображение;
- setPrice:string - устанавливает цену;

> Form

Отвечает за отображение формы на сайте. 
В конструктор первым аргументом передается контейнер, а вторым - объект events, отвечающий за вызов событий при заполнении полей формы.

Методы класса:
- onInputChange - отслеживает изменения в полях формы
- valid - устанавливает состояние кнопки в зависимости от того, заполнено ли поле/поля
- errors - устанавливает текст ошибки

> Basket

Отвечает за отображение данных в корзине покупок. Содержит такие свойства как список товаров и общую сумму покупки.

Методы класса:
-items: HTMLElement[] - устанавливает элементы в корзине;
-total: number - отображает общую цену покупок

3) Представление (Presenter)

Отвечает за управление взаимодействием между Model и View, а также за обработку действий пользователя и преобразование этих действий в операции с Model. 
Слой представления получает введенные данные от пользователя, обрабатывает эти данные и затем передаёт их модели.
Presenter также может быть ответственен за управление состоянием приложения и координацию между различными компонентами.

Код, отвечающий за слой представления будет находиться в корневом файле index.ts, где взаимодействие слоя данных и отображения будет осуществляться с помощью событий генерируемых EventEmitter.

> Базовый класс EventEmitter

Класс EventEmitter является генератором событий. Используется для управления событиями и передачей данных между компонентами.

Содержит методы:
-on: устанавливает обработчик события;
-off: удаляет обработчик события;
-emit: инициирует событие с возможностью передачи данных;
-onAll: устанавливает обработчик для всех событий;
-offAll: сбрасывает все обработчики событий;
-trigger: создаёт коллбэк-триггер, генерирующий событие при вызове

